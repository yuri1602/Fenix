import sqlite3

# Connect to database
conn = sqlite3.connect('school_inventory.db')
cursor = conn.cursor()

# Delete ALL existing materials
cursor.execute('DELETE FROM materials')
print("Изтрити всички стари материали")

# Reset the auto-increment counter
cursor.execute('DELETE FROM sqlite_sequence WHERE name="materials"')

# New materials list with exact quantities
materials = [
    ("Маркер за дъска Черен", "Канцеларски материали", 36, 5, ""),
    ("Маркер за дъска Червен", "Канцеларски материали", 11, 5, ""),
    ("Маркер за дъска Син", "Канцеларски материали", 13, 5, ""),
    ("Маркер за дъска Зелен", "Канцеларски материали", 12, 5, ""),
    ("Цветни комплектни маркери за Дъска", "Канцеларски материали", 8, 3, ""),
    ("Сухо лепило", "Канцеларски материали", 22, 10, ""),
    ("Гланцови блокчета", "Канцеларски материали", 42, 10, ""),
    ("Син химикал", "Канцеларски материали", 214, 50, ""),
    ("Черен химикал", "Канцеларски материали", 22, 10, ""),
    ("Червен химикал", "Канцеларски материали", 13, 10, ""),
    ("Подварзия Голяма", "Канцеларски материали", 64, 20, ""),
    ("Подварзия малка", "Канцеларски материали", 30, 10, ""),
    ("Течно лепило", "Канцеларски материали", 5, 5, ""),
    ("Картон за табло", "Канцеларски материали", 83, 20, ""),
    ("Цветни моливи Комплект", "Канцеларски материали", 16, 10, ""),
    ("Флумастри Комплект", "Канцеларски материали", 12, 10, ""),
    ("Тиксо", "Канцеларски материали", 20, 10, ""),
    ("Хайлайтър Комплекти", "Канцеларски материали", 5, 5, ""),
    ("Блокче за рисуване А4", "Канцеларски материали", 5, 5, ""),
    ("Ножица", "Канцеларски материали", 14, 10, ""),
    ("Линия", "Канцеларски материали", 18, 10, ""),
    ("Транспортир", "Канцеларски материали", 2, 5, ""),
    ("Цветна хартия (Пакет)", "Канцеларски материали", 5, 5, ""),
    ("Плейдо Пластелин", "Канцеларски материали", 0, 5, ""),
    ("Дъска за Пластелин", "Канцеларски материали", 1, 5, ""),
    ("Пакт Мокри кърпи", "Почистващи материали", 11, 10, ""),
    ("Острилки", "Канцеларски материали", 16, 10, ""),
    ("Папки за джобове", "Канцеларски материали", 7, 5, ""),
    ("Пакет джобове (Пакети)", "Канцеларски материали", 14, 10, ""),
    ("Коректор на лента", "Канцеларски материали", 5, 5, ""),
    ("Течен коректор", "Канцеларски материали", 4, 5, ""),
    ("Папки със цип", "Канцеларски материали", 10, 10, ""),
    ("Гумички", "Канцеларски материали", 9, 10, ""),
    ("Рафтчета за учебници", "Организация", 6, 5, ""),
    ("Моливници", "Канцеларски материали", 1, 5, ""),
    ("1 ел.устрилка", "Канцеларски материали", 1, 2, ""),
    ("Човали за смет 50л.", "Почистващи материали", 4, 10, ""),
    ("Човали за смет 20л.", "Почистващи материали", 0, 10, ""),
    ("Човали за смет 35л.", "Почистващи материали", 1, 10, ""),
    ("Човали за смет 70л.", "Почистващи материали", 3, 10, ""),
    ("Кламери (Кутийка)", "Канцеларски материали", 5, 5, ""),
    ("Телбот (Кутийки)", "Канцеларски материали", 11, 5, ""),
    ("Лепящи листчета за отбелязване", "Канцеларски материали", 4, 5, ""),
    ("Гъби за дъска", "Почистващи материали", 15, 10, ""),
    ("Папки класьор", "Канцеларски материали", 11, 10, ""),
    ("Несесер", "Канцеларски материали", 17, 10, ""),
    ("Розови Химикали", "Канцеларски материали", 10, 10, ""),
    ("Лилави Химикали", "Канцеларски материали", 10, 10, ""),
    ("Зелени Химикали", "Канцеларски материали", 11, 10, ""),
    ("Оранжеви Химикали", "Канцеларски материали", 10, 10, ""),
    ("Органайзер за бюро", "Организация", 1, 2, ""),
    ("Темперни бои Комплект от 6бр", "Рисуване", 3, 5, ""),
    ("Темперни бои Комплект от 12бр", "Рисуване", 3, 5, ""),
    ("Перфоратори", "Канцеларски материали", 2, 2, ""),
    ("Тънкописец Син", "Канцеларски материали", 7, 5, ""),
    ("Тънкописец Черен", "Канцеларски материали", 3, 5, ""),
    ("Тънкописец Розов", "Канцеларски материали", 4, 5, ""),
    ("Тънкописец червени", "Канцеларски материали", 7, 5, ""),
    ("Габърчета Кутия", "Канцеларски материали", 19, 10, ""),
    ("Пермаменти маркери", "Канцеларски материали", 11, 5, ""),
    ("Телбот Устройство", "Канцеларски материали", 4, 2, ""),
    ("Водни Бои", "Рисуване", 4, 5, ""),
    ("Етикети", "Канцеларски материали", 2, 5, ""),
    ("Четки за боя пакет", "Рисуване", 2, 5, ""),
    ("Гумички за молив", "Канцеларски материали", 46, 20, ""),
    ("Графитни Моливи", "Канцеларски материали", 8, 10, ""),
    ("Чашки за боя", "Рисуване", 6, 5, ""),
    ("Пиро моливи", "Канцеларски материали", 8, 10, ""),
    ("Глина", "Рисуване", 1, 2, ""),
    ("Пастели комплект", "Рисуване", 1, 2, ""),
    ("Папки с копче", "Канцеларски материали", 34, 15, ""),
    ("Торбички 10л", "Канцеларски материали", 13, 10, ""),
    ("Хартия за Принтер(Пакети)", "Канцеларски материали", 9, 5, ""),
    ("Гъби за миене на съдове", "Почистващи материали", 27, 15, ""),
    ("Тетрадки (Малък формат, малки квадрати)", "Тетрадки", 29, 20, ""),
    ("Тетрадки (Малък формат, големи квадрати)", "Тетрадки", 94, 30, ""),
    ("Тетрадки (Малък формат, тесни и широки редове)", "Тетрадки", 97, 30, ""),
    ("Тетрадки (Малък формат, Речник)", "Тетрадки", 9, 10, ""),
    ("Тетрадки (Голям формат, широки редове)", "Тетрадки", 41, 20, ""),
    ("Тетрадки (Малък формат, широки редове)", "Тетрадки", 41, 20, ""),
    ("Нотна тетрадка", "Тетрадки", 1, 5, ""),
    ("Спрей за дъска", "Почистващи материали", 5, 5, ""),
    ("Стирка", "Почистващи материали", 2, 5, ""),
    ("Обикновен пластелин", "Рисуване", 1, 5, ""),
]

# Insert new materials
cursor.executemany('''
    INSERT INTO materials (name, category, quantity, min_threshold, notes)
    VALUES (?, ?, ?, ?, ?)
''', materials)

conn.commit()

# Show summary
cursor.execute('SELECT COUNT(*) FROM materials')
total = cursor.fetchone()[0]
print(f"\n✅ Успешно добавени {total} материала")

# Show materials with zero quantity
cursor.execute('SELECT name, quantity FROM materials WHERE quantity = 0')
zero_materials = cursor.fetchall()
if zero_materials:
    print(f"\n⚠️ Материали с 0 наличност ({len(zero_materials)}):")
    for name, qty in zero_materials:
        print(f"  - {name}")

# Show low stock materials
cursor.execute('SELECT name, quantity, min_threshold FROM materials WHERE quantity > 0 AND quantity <= min_threshold')
low_stock = cursor.fetchall()
if low_stock:
    print(f"\n📊 Материали под минимума ({len(low_stock)}):")
    for name, qty, threshold in low_stock:
        print(f"  - {name}: {qty} бр (мин: {threshold})")

conn.close()
print("\n✅ Базата данни е обновена!")
